/* Space Grotesk (Google Fonts) & Pretendard (Korean) */
@import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap");
@import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css");
@import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap");

:root {
  /* Vibrant Pastel Palette */
  --bg-color: #A3A1EB;
  /* Soft Purple Background */
  --container-bg: #E0F4B6;
  /* Lemon/Lime Container Background */
  --accent-color: #FF9EAA;
  /* Soft Pink Accent */
  --border-color: #141414;
  /* Pure Black Border */
  --border-width: 3px;
  --shadow-offset: 4px;
  --font-main: "Pretendard", "Space Grotesk", -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;

  --text-color: #141414;
  --surface-color: #FFFFFF;
  /* White for cards */
  --muted-color: #5B5B5B;
  --radius: 0px;
  --shadow-color: rgba(20, 20, 20, 1);
  --heading-color: #141414;

  /* Layout Widths */
  --content-width: 1200px;
  --wide-content-width: 1600px;
}

/* Base */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

body {
  margin: 0;
  font-family: var(--font-main);
  background: var(--bg-color);
  color: var(--text-color);
  font-size: 1rem;
  line-height: 1.7;
  letter-spacing: 0.01em;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 1.5rem 0 0.8rem;
  /* Added top margin and increased bottom margin */
  line-height: 1.2;
  letter-spacing: -0.02em;
  color: var(--heading-color);
  scroll-margin-top: 230px;
}

h1:first-child,
h2:first-child,
h3:first-child {
  margin-top: 0;
}

h1 {
  font-size: clamp(1.75rem, 3vw, 2.25rem);
}

h2 {
  font-size: clamp(1.4rem, 2.2vw, 1.75rem);
}

h3 {
  font-size: clamp(1.15rem, 1.8vw, 1.35rem);
}

/* Highlight target heading */
h1:target,
h2:target,
h3:target,
h4:target {
  background-color: var(--accent-color);
  color: var(--border-color);
  border: 3px solid var(--border-color);
  box-shadow: 6px 6px 0 var(--border-color);
  padding: 0.2rem 0.5rem;
  width: fit-content;
  display: inline-block;
  animation: target-pop 0.3s ease-out;
}

@keyframes target-pop {
  0% {
    transform: scale(0.98);
  }

  50% {
    transform: scale(1.02);
  }

  100% {
    transform: scale(1);
  }
}

/* Distinct highlight for Related Links header */
/* logic moved to button styles */

p {
  margin: 0 0 1em;
  /* Reduced from 1.5em to tight spacing */
  color: var(--text-color);
}

ul,
ol {
  margin: 0 0 1em 1.2em;
  /* Reduced bottom margin from 1.5em to 1em */
  padding-left: 0;
  /* Reset padding-left */
  /* Reset padding-left to control indention with margin or padding */
}

li {
  margin-bottom: 0.3em;
  /* Reduced vertical spacing between list items */
}


a {
  color: inherit;
  text-decoration: underline;
  text-decoration-thickness: 2px;
  text-underline-offset: 3px;
  text-decoration-color: var(--accent-color);
}

a:hover {
  background: var(--accent-color);
  box-shadow: 0 0 0 2px var(--accent-color);
}

:focus-visible {
  outline: 3px solid var(--accent-color);
  outline-offset: 3px;
}

strong,
b {
  font-weight: 700;
  color: var(--text-color);
}

hr {
  border: 0;
  border-top: var(--border-width) solid var(--border-color);
  width: 20%;
  margin: 2.5em auto;
  opacity: 0.8;
}

/* Neobrutal primitives */
.neo-card,
.neo-input,
.neo-btn,
.neo-tag {
  border: var(--border-width) solid var(--border-color);
  border-radius: var(--radius);
  box-shadow: var(--shadow-offset) var(--shadow-offset) 0 var(--shadow-color);
}

/* Button */
.neo-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  font: 700 0.95rem/1 var(--font-main);
  text-transform: uppercase;
  letter-spacing: 0.06em;
  background: var(--accent-color);
  color: var(--border-color);
  cursor: pointer;
  user-select: none;
  text-decoration: none;
  transition: transform 140ms ease, box-shadow 140ms ease, background 140ms ease;
}

.neo-btn:hover {
  transform: translate(-2px, -2px);
  box-shadow: 6px 6px 0 var(--shadow-color);
}

.neo-btn:active {
  transform: translate(0, 0);
  box-shadow: 0 0 0 var(--shadow-color);
}

.neo-btn[disabled],
.neo-btn[aria-disabled="true"] {
  opacity: 0.55;
  cursor: not-allowed;
  transform: none;
}

/* Card */
.neo-card {
  background: var(--surface-color);
  padding: 1.25rem;
}

.neo-card> :last-child {
  margin-bottom: 0;
}

/* Input */
.neo-input {
  width: 100%;
  padding: 0.75rem 0.9rem;
  font: 600 1rem/1.2 var(--font-main);
  color: var(--text-color);
  background: var(--surface-color);
  caret-color: var(--border-color);
  transition: transform 140ms ease, box-shadow 140ms ease;
}

.neo-input::placeholder {
  color: var(--muted-color);
  font-weight: 500;
}

.neo-input:focus {
  transform: translate(-1px, -1px);
  box-shadow: calc(var(--shadow-offset) + 2px) calc(var(--shadow-offset) + 2px) 0 var(--shadow-color);
  outline: none;
}

/* Tag */
.neo-tag {
  display: inline-flex;
  align-items: center;
  padding: 0.35rem 0.6rem;
  font: 700 0.75rem/1 var(--font-main);
  text-transform: uppercase;
  letter-spacing: 0.06em;
  background: var(--surface-color);
  color: var(--border-color);
}

/* Optional variants (safe defaults) */
.neo-card--accent,
.neo-tag--accent {
  background: var(--accent-color);
}

/* Mobile responsive breakpoints */
@media (max-width: 768px) {
  :root {
    --border-width: 3px;
    --shadow-offset: 3px;
  }

  .neo-card {
    padding: 1rem;
  }

  .neo-btn {
    width: 100%;
    padding: 0.85rem 1rem;
  }

  #search-section,
  #post-list {
    width: calc(100% - 2rem) !important;
    margin-left: auto !important;
    margin-right: auto !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }

  #post-content-view .post-layout {
    width: calc(100% - 2rem) !important;
    margin-left: auto !important;
    margin-right: auto !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }

  blog-header header .neo-card,
  blog-footer footer.neo-card {
    width: calc(100% - 2rem) !important;
    margin-left: auto !important;
    margin-right: auto !important;
  }

  #post-content-view>div>div {
    width: calc(100% - 2rem) !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    margin-left: auto !important;
    margin-right: auto !important;
  }

  #wide-mode-btn,
  #copy-md-btn,
  #pdf-btn {
    display: none !important;
  }
}

@media (max-width: 420px) {
  body {
    line-height: 1.45;
  }

  .neo-card {
    padding: 0.9rem;
  }

  .neo-input {
    font-size: 0.98rem;
  }
}

@media (max-width: 850px) {
  .post-layout {
    grid-template-columns: 1fr !important;
  }

  #toc-sidebar {
    display: none !important;
    /* Hide TOC on mobile for simplicity, or make it inline */
  }
}

/* TOC Sidebar Links */
.toc-link {
  transition: color 140ms ease;
}

.toc-link:hover {
  background: transparent !important;
  box-shadow: none !important;
  color: var(--accent-color) !important;
  transform: translateX(4px);
}

html {
  scroll-behavior: smooth;
}

/* Page Transition Animation */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out forwards;
}

/* Table Styles (Neo-Brutalism) */
table {
  width: 100%;
  border-collapse: collapse;
  margin: 2em 0;
  font-size: 0.95rem;
  overflow-x: auto;
  display: block;
  /* For horizontal scroll on small screens */
}

/* On larger screens, display as table */
@media (min-width: 640px) {
  table {
    display: table;
  }
}

th,
td {
  border: var(--border-width) solid var(--border-color);
  text-align: left;
}

th {
  background: #f1f5f9;
  /* Subtle light gray instead of accent mint */
  padding: 0.75em 1em;
  /* Keep header spacious */
  font-weight: 700;
  text-transform: uppercase;
  font-size: 0.85em;
  /* Slightly smaller font for headers */
  letter-spacing: 0.05em;
  text-align: center;
  /* Center align headers */
}

td {
  padding: 0.4em 0.8em;
  /* Compact data rows */
  background: var(--surface-color);
}


/* Wide Mode Support */
/* Main Layout Container (Wraps content to give it a card look if desired, or just alignment) */
.layout-container {
  width: 100%;
  max-width: none;
  margin: 0;
  padding: 0;
}

/* Wide Mode Support */
/* Code Block Styles - Refined Card Look (Flat) */
pre {
  background: #f8f9fa;
  border: 1px solid #d1d5db;
  /* Clean, thin gray border */
  border-radius: 6px;
  /* Slightly tighter radius */
  padding: 3rem 1.75rem 1.75rem 1.75rem;
  /* More padding */
  overflow-x: hidden;
  position: relative;
  margin: 2rem 0;
  box-shadow: none;
  /* Removed shadow/gradient effect */
  white-space: pre-wrap;
  /* Wrap text */
  word-break: break-word;

  /* Typography for "Developer" feel */
  font-family: 'JetBrains Mono', 'Consolas', 'Monaco', 'Courier New', monospace;
  font-size: 0.85rem;
  /* Slightly smaller text */
  line-height: 1.5;
  /* Denser lines */
  letter-spacing: -0.015em;
  /* Tighter letter spacing */
  color: #334155;
}

pre hr {
  border: 0;
  border-top: 1px solid #cbd5e1;
  margin: 1.5em 0;
  width: 100%;
}

code {
  font-family: 'JetBrains Mono', 'Consolas', 'Monaco', 'Courier New', monospace;
  font-size: inherit;
}

/* Inline code style */
p code,
li code,
td code,
th code {
  background: rgba(224, 244, 182, 0.6);
  border: 1px solid var(--border-color);
  padding: 0.1em 0.3em;
  border-radius: 4px;
  font-weight: 600;
  color: var(--heading-color);
  font-size: 0.85em;
}

/* Pre block code override */
pre code {
  background: transparent;
  border: none;
  padding: 0;
  border-radius: 0;
  color: inherit;
  font-weight: normal;
}

/* Copy Button - Icon Style */
.copy-code-btn {
  position: absolute;
  top: 0.75rem;
  right: 0.75rem;
  background: transparent;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 10;
  transition: all 0.2s ease;
  color: #64748b;
  font-size: 1.2rem;
  padding: 0;
}

.copy-code-btn:hover {
  background: #fff;
  color: var(--accent-color);
  border-color: var(--accent-color);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transform: translateY(-1px);
}

.copy-code-btn:active {
  transform: translateY(0);
  background: #f1f5f9;
}

/* Code Language Label (Optional) */
pre::before {
  display: none;
}

/* Toggle/Accordion Styles (details & summary) */
details {
  border: 1px solid #d1d5db;
  /* Thin gray border */
  border-radius: 8px;
  background: white;
  margin: 1.5rem 0;
  overflow: hidden;
  /* Clip content for rounded corners */
  transition: all 0.3s ease;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  /* Very subtle shadow */
}

summary {
  padding: 1rem 1.25rem;
  font-weight: 600;
  cursor: pointer;
  list-style: none;
  /* Remove default triangle */
  display: flex;
  align-items: center;
  justify-content: space-between;
  /* Space between title and arrow */
  background: white;
  color: #334155;
  transition: background 0.2s, color 0.2s;
  font-family: var(--font-main);
  font-size: 1rem;
}

/* Chrome/Safari default marker removal */
summary::-webkit-details-marker {
  display: none;
}

/* Hover effect for summary */
summary:hover {
  background: #f8f9fa;
  color: var(--text-color);
}

/* Custom Chevron Icon (using CSS border) */
summary::after {
  content: '';
  display: inline-block;
  width: 0.5rem;
  height: 0.5rem;
  border-right: 2px solid #94a3b8;
  border-bottom: 2px solid #94a3b8;
  transform: rotate(45deg);
  transition: transform 0.3s ease;
  margin-left: 0.75rem;
  margin-right: 0.25rem;
}

/* Open State Styling */
/* When open, the whole box gets the light gray background */
details[open] {
  background: #f8fafc;
}

details[open] summary {
  border-bottom: 1px solid #e2e8f0;
  /* Divider line */
  background: #fff;
  /* Header stays white */
  color: var(--heading-color);
  position: sticky;
  top: 0;
  z-index: 5;
  margin-bottom: 0;
  /* Ensure no gap between summary and content */
}

/* Rotate Chevron when open */
details[open] summary::after {
  transform: rotate(225deg);
  /* Flip up */
  border-color: var(--accent-color);
  /* Highlight color */
}

/* Content Area inside details */
/* Apply margins to all direct children except summary to create "padding" effect */
details>*:not(summary) {
  margin-left: 1.5rem;
  /* Reduced to match vertical spacing */
  margin-right: 1.5rem;
  /* Reduced to match vertical spacing */
  background: transparent;
  /* Inherit gray from details */
}

/* Add vertical spacing for the content flow */
details>summary+* {
  margin-top: 1.5rem;
  /* Space between header and first item */
}

details>*:last-child {
  margin-bottom: 1.5rem;
  /* Space at the bottom */
}

/* Nested Pre/Code Blocks inside Details */
/* Make them pop out against the light gray background */
details pre {
  background: #ffffff !important;
  /* White card look */
  border: 1px solid #e2e8f0;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  width: auto;
  /* Respect margins */
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-5px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

body.wide-view {
  --content-width: var(--wide-content-width);
}

/* Ensure header and footer respect the updated variable width - REMOVED to allow full width background */
/* body.wide-view blog-header header,
body.wide-view blog-footer footer {
  max-width: var(--content-width) !important;
} */

/* body.wide-view .layout-container {
  max-width: var(--content-width);
} - REMOVED to prevent left alignment */

body.wide-view #post-content-view .post-layout {
  grid-template-columns: 300px 1fr !important;
  max-width: var(--wide-content-width) !important;
  margin: 2rem auto !important;
  width: 100%;
}

/* Specific overrides for sections inside main to fill width */
body.wide-view #search-section,
body.wide-view #post-list {
  max-width: 1000px !important;
  /* Slightly wider but not full width for readability */
}


/* Print / PDF Styles - Professional Report Theme */
@media print {
  @page {
    size: A4;
    margin: 2cm;
  }

  /* Hide everything by default */
  body * {
    visibility: hidden;
  }

  /* Expose specific print elements */
  #post-content-view,
  #print-header,
  #print-header *,
  #post-content-view .post-layout,
  #post-content,
  #post-content * {
    visibility: visible;
  }

  /* Hide UI elements explicitly */
  blog-header,
  blog-footer,
  #search-section,
  #post-list-view,
  #toc-sidebar,
  .neo-btn,
  #back-btn,
  #post-content-view>div:first-child {
    /* Sticky control bar */
    display: none !important;
  }

  /* Layout Reset */
  body {
    background: white !important;
    color: #000 !important;
    font-size: 11pt;
    /* Standard doc size */
    line-height: 1.6;
  }

  #post-content-view {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    margin: 0;
    padding: 0;
    display: block !important;
  }

  /* Print Header Styles */
  #print-header {
    display: block !important;
    width: 100%;
    border-bottom: 2px solid #000 !important;
    margin-bottom: 30px !important;
    padding-bottom: 10px !important;
  }

  /* Post Layout Reset */
  .post-layout {
    display: block !important;
    width: 100% !important;
    max-width: none !important;
    margin: 0 !important;
    padding: 0 !important;
    grid-template-columns: 1fr !important;
  }

  /* Content Styling */
  #post-content {
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    width: 100% !important;
    margin: 0 !important;
  }

  /* Typography Enhancements */
  h1 {
    font-size: 24pt;
    margin-bottom: 0.5em;
    padding-bottom: 0.3em;
    border-bottom: 3px double #000;
    /* Distinct Title Look */
    text-align: left;
  }

  h2 {
    font-size: 16pt;
    margin-top: 1.5em;
    border-bottom: 1px solid #ccc;
    padding-bottom: 5px;
  }

  h3 {
    font-size: 13pt;
    margin-top: 1.2em;
    color: #333;
  }

  p,
  li {
    text-align: justify;
    /* Report-like justification */
  }

  /* Code Blocks */
  pre,
  code {
    border: 1px solid #ddd;
    background: #f9f9f9 !important;
    /* Light gray for contrast */
    color: #333 !important;
    overflow-x: hidden;
    /* Avoid scrollbars in print */
    white-space: pre-wrap;
    /* Wrap long formatting */
  }

  /* Links */
  a {
    text-decoration: none !important;
    color: #000 !important;
    font-weight: 600;
  }

  /* Optional: Show URL for external links if needed, but keeping it clean for now */
  /* a[href^="http"]::after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
    color: #666;
  } */
}